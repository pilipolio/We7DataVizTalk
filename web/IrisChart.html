<!DOCTYPE html>
<html>
  <head>
    <title>Iris chart</title>
    <script type="text/javascript" src="d3.js"></script>
  </head>
  <style>
  .axis path,
.axis line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
}

.axis text {
    font-family: sans-serif;
    font-size: 11px;
}
  </style>

  <body>

    <div id="iris_biplot"></div>
    
    <script>
    var speciesToColor={"setosa": "red", "versicolor": "green", "virginica": "blue"};
    var data=[{"sepalLength": 5.1, "petalWidth": 0.2, "sepalWidth": 3.5, "petalLength": 1.4, "species": "setosa"}, {"sepalLength": 4.9, "petalWidth": 0.2, "sepalWidth": 3, "petalLength": 1.4, "species": "setosa"}, {"sepalLength": 4.7, "petalWidth": 0.2, "sepalWidth": 3.2, "petalLength": 1.3, "species": "setosa"}, {"sepalLength": 4.6, "petalWidth": 0.2, "sepalWidth": 3.1, "petalLength": 1.5, "species": "setosa"}, {"sepalLength": 5, "petalWidth": 0.2, "sepalWidth": 3.6, "petalLength": 1.4, "species": "setosa"}, {"sepalLength": 5.4, "petalWidth": 0.4, "sepalWidth": 3.9, "petalLength": 1.7, "species": "setosa"}, {"sepalLength": 4.6, "petalWidth": 0.3, "sepalWidth": 3.4, "petalLength": 1.4, "species": "setosa"}, {"sepalLength": 5, "petalWidth": 0.2, "sepalWidth": 3.4, "petalLength": 1.5, "species": "setosa"}, {"sepalLength": 4.4, "petalWidth": 0.2, "sepalWidth": 2.9, "petalLength": 1.4, "species": "setosa"}, {"sepalLength": 4.9, "petalWidth": 0.1, "sepalWidth": 3.1, "petalLength": 1.5, "species": "setosa"}, {"sepalLength": 5.4, "petalWidth": 0.2, "sepalWidth": 3.7, "petalLength": 1.5, "species": "setosa"}, {"sepalLength": 4.8, "petalWidth": 0.2, "sepalWidth": 3.4, "petalLength": 1.6, "species": "setosa"}, {"sepalLength": 4.8, "petalWidth": 0.1, "sepalWidth": 3, "petalLength": 1.4, "species": "setosa"}, {"sepalLength": 4.3, "petalWidth": 0.1, "sepalWidth": 3, "petalLength": 1.1, "species": "setosa"}, {"sepalLength": 5.8, "petalWidth": 0.2, "sepalWidth": 4, "petalLength": 1.2, "species": "setosa"}, {"sepalLength": 5.7, "petalWidth": 0.4, "sepalWidth": 4.4, "petalLength": 1.5, "species": "setosa"}, {"sepalLength": 5.4, "petalWidth": 0.4, "sepalWidth": 3.9, "petalLength": 1.3, "species": "setosa"}, {"sepalLength": 5.1, "petalWidth": 0.3, "sepalWidth": 3.5, "petalLength": 1.4, "species": "setosa"}, {"sepalLength": 5.7, "petalWidth": 0.3, "sepalWidth": 3.8, "petalLength": 1.7, "species": "setosa"}, {"sepalLength": 5.1, "petalWidth": 0.3, "sepalWidth": 3.8, "petalLength": 1.5, "species": "setosa"}, {"sepalLength": 5.4, "petalWidth": 0.2, "sepalWidth": 3.4, "petalLength": 1.7, "species": "setosa"}, {"sepalLength": 5.1, "petalWidth": 0.4, "sepalWidth": 3.7, "petalLength": 1.5, "species": "setosa"}, {"sepalLength": 4.6, "petalWidth": 0.2, "sepalWidth": 3.6, "petalLength": 1, "species": "setosa"}, {"sepalLength": 5.1, "petalWidth": 0.5, "sepalWidth": 3.3, "petalLength": 1.7, "species": "setosa"}, {"sepalLength": 4.8, "petalWidth": 0.2, "sepalWidth": 3.4, "petalLength": 1.9, "species": "setosa"}, {"sepalLength": 5, "petalWidth": 0.2, "sepalWidth": 3, "petalLength": 1.6, "species": "setosa"}, {"sepalLength": 5, "petalWidth": 0.4, "sepalWidth": 3.4, "petalLength": 1.6, "species": "setosa"}, {"sepalLength": 5.2, "petalWidth": 0.2, "sepalWidth": 3.5, "petalLength": 1.5, "species": "setosa"}, {"sepalLength": 5.2, "petalWidth": 0.2, "sepalWidth": 3.4, "petalLength": 1.4, "species": "setosa"}, {"sepalLength": 4.7, "petalWidth": 0.2, "sepalWidth": 3.2, "petalLength": 1.6, "species": "setosa"}, {"sepalLength": 4.8, "petalWidth": 0.2, "sepalWidth": 3.1, "petalLength": 1.6, "species": "setosa"}];
    var width=300;
    var margin = 40;
    var height=300;
    var featureNamesToRanges={"sepalLength": [0, 7.9], "petalWidth": [0, 2.5], "sepalWidth": [0, 4.4], "petalLength": [0, 6.9]};


	var svg = d3.select('#iris_biplot')
		      .append('svg').attr('width', width).attr('height', height);

	var scales = {
		x : d3.scale.linear()
		  .domain(featureNamesToRanges.sepalLength)
		  .range([margin, width - 2 * margin]),
		y : d3.scale.linear()
		  	.domain(featureNamesToRanges.petalWidth)
			.range([height - 2 * margin, margin])
	};

	svg.selectAll('.point').data(data).enter()
		.append('svg:circle')
		.attr('cx', function(d) { return scales.x(d.sepalLength) })
		.attr('cy', function(d) { return scales.y(d.petalWidth) })
		.attr('r', 4)
        .style("fill", function(d) { return speciesToColor[d.species] })
        .style("fill-opacity", .4)
		.append("svg:title")
		.text(function(d) {return "x = " + d.sepalLength + ", y = " + d.petalWidth + ", " + d.species });

    // http://chimera.labs.oreilly.com/books/1230000000345/ch08.html
    var xAxis = d3.svg.axis()
                  .scale(scales.x)
                  .orient("bottom")
                  .ticks(5);
    svg.append("g")
       .attr("class", "axis")
       .attr("transform", "translate(0," + (height - 2 * margin) + ")")
       .call(xAxis);

    var xAxis = d3.svg.axis()
                  .scale(scales.y)
                  .orient("left")
                  .ticks(5);
    svg.append("g")
       .attr("class", "axis")
       .attr("transform", "translate(" + margin + ",0)")
       .call(xAxis);
       
    </script>
  </body>
</html>

